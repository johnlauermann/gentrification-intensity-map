<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Gentrification Intensity Index</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="webflow.css" rel="stylesheet" type="text/css">
  <link href="style-1.css" rel="stylesheet" type="text/css">
  <link href="style-fonts.css" rel="stylesheet" type="text/css">
  <link href="images/ga-favicon-1.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/ga-webclip-1.png" rel="apple-touch-icon">
</head>

<body class="body">

  <!-- header -->
  <div class="header-container">

    <!-- card 1 –title and info -->
    <div id="card-1" class="card-container">
      <div class="txt-title">Gentrification Intensity Index, 1990-2020</div> 
      <div class="info-wrapper">
        <div class="txt-body">Based on indicators of class status and class upgrading.<br>16,603 tracts mapped.<br>Source: Decennial Census</div>
        <a href="https://github.com/johnlauermann/gentrification-intensity-map" target="_blank" class="link-wrapper">
          <span class="txt-link">Learn more</span>
          <span class="txt-arrow">↗</span>
        </a>
      </div>
    </div>

    <!-- card 2 –dropdowns -->
    <div id="card-2" class="card-container">

      <!-- dropdown menu -->
      <div data-hover="true" data-delay="1" class="dropdown-wrapper">
        <div class="dropdown-selected">
          <div class="txt-arrow">↑</div>
          <div class="txt-arrow">↓</div>
          <div class="txt-drop">New York City</div>
        </div>
        <nav class="dropdown-navigation">
          <a href="#" class="dropdown-link">Los Angeles</a>
          <a href="#" class="dropdown-link">Chicago</a>
          <a href="#" class="dropdown-link">Dallas</a>
          <a href="#" class="dropdown-link">Houston</a>
          <a href="#" class="dropdown-link">Washington DC</a>
          <a href="#" class="dropdown-link">Philadelphia</a>
          <a href="#" class="dropdown-link">Atlanta</a>
          <a href="#" class="dropdown-link">US</a>
        </nav>
      </div>

      <div class="line"></div>
      
      <!-- municipality check box -->
      <div id="legend-index" class="txt-drop">
        <input type="checkbox" id="municipalityToggle" class="w-checkbox-input checkbox" checked="">
        <span class="checkbox-label w-form-label" for="municipalityToggle">Central municipality</span>
      </div>

      <div class="line"></div>

      <!-- index legend -->
      <div class="txt-drop-wr">
        <input type="checkbox" id="intensityToggle" class="w-checkbox-input checkbox" checked="">
        <span class="checkbox-label w-form-label" for="intensityToggle">Gentrification Intensity, standard deviation</span>      
        <div class="ga-legend-wr">
          <div class="ga-legend-icon-wr">
            <div class="ga-legend-icon _1"></div>
            <div class="ga-legend-text">-2.5</div>
          </div>
          <div class="ga-legend-icon-wr">
            <div class="ga-legend-icon _2"></div>
          </div>
          <div class="ga-legend-icon-wr">
            <div class="ga-legend-icon _3"></div>
            <div class="ga-legend-text">-0.5</div>
          </div>
          <div class="ga-legend-icon-wr">
            <div class="ga-legend-icon _4"></div>
          </div>
          <div class="ga-legend-icon-wr">
            <div class="ga-legend-icon _5"></div>
            <div class="ga-legend-text">1.5</div>
          </div>
          <div class="ga-legend-icon-wr">
            <div class="ga-legend-icon _6"></div>
          </div>
          <div class="ga-legend-icon-wr">
            <div class="ga-legend-icon _7"></div>
            <div class="ga-legend-text">3.5</div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>





  <section class="ga-slides-container">
    <div id="w-node-ebec2112-c6bd-5f10-cf4d-ee8a040f2c18-a7884dd7" class="ga-slides-wrapper right">
      <div id="w-node-ebec2112-c6bd-5f10-cf4d-ee8a040f2c1c-a7884dd7" class="ga-slide-img-bg-wrapper">
        <div id="w-node-_8a809f15-5417-f119-bf02-5a8a48cf2c96-a7884dd7" class="ga-code-map w-embed w-script">
          <div id="map" style="width: 100%; height: 100%;"></div>
          <!--  Toggle checkbox UI  -->
          <label style="margin-top:16px; display:block;">
            <input type="checkbox" id="municipalityToggle" checked="">
            Show Central municipality
          </label>
          <label style="margin-top:16px; display:block;">
            <input type="checkbox" id="intensityToggle" checked="">
            Show Intensity map
          </label>
          <!--  Mapbox scripts  -->
          <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
          <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
          <script>

  mapboxgl.accessToken = 'pk.eyJ1IjoiYWxpY2V2aWdnaWFuaSIsImEiOiJjbG53Mzc5MDcwNGplMm1wY3UwcDZsOTNvIn0.YHmzjHuq5sSd-lgg22nEjg';
  const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/aliceviggiani/cmdj8bubf00bs01s541k72w6k',
    center: [-74, 40.73],
    zoom: 10
  });
  map.on('load', () => {
    // ensure the layer is visible by default (optional)
    map.setLayoutProperty('large_metros_intensity', 'visibility', 'visible');
    map.setLayoutProperty('nyc-streets', 'visibility', 'none');
    map.setLayoutProperty('municipality-nyc-line', 'visibility', 'visible');
    // add the event listener after map and layer are loaded
    document.getElementById('intensityToggle').addEventListener('change', function(e) {
      const visibility = map.getLayoutProperty('large_metros_intensity', 'visibility');
      map.setLayoutProperty(
        'large_metros_intensity',
        'visibility',
        visibility === 'visible' ? 'none' : 'visible'
      );
    });
    document.getElementById('municipalityToggle').addEventListener('change', function(e) {
      const visibility = map.getLayoutProperty('municipality-nyc-line', 'visibility');
      map.setLayoutProperty(
        'municipality-nyc-line',
        'visibility',
        visibility === 'visible' ? 'none' : 'visible'
      );
    });
  });
  </script>

      </div>
    </div>
  </section>


  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6636e256dbc082950ae82258" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="script-1.js" type="text/javascript"></script>


</body>
</html>
