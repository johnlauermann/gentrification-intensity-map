<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Gentrification Intensity Index</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.15.0/mapbox-gl.css" rel="stylesheet">
    <link href="css/style-3.css" rel="stylesheet" type="text/css">
    <link href="css/style-fonts.css" rel="stylesheet" type="text/css">
    <link href="images/ga-favicon-1.png" rel="shortcut icon" type="image/x-icon">
    <link href="images/ga-webclip-1.png" rel="apple-touch-icon">
</head>

<body class="body">

    <!-- content -->
    <section class="content-container">

        <!-- box 1 title and info -->
        <div id="box-1" class="box-container">
            <div class="wrapper">
                <div class="txt-title">US Gentrification intensity index</div>
            </div>
            <div class="line"></div>
            <div class="wrapper">
                <div class="txt-body">Index created based on indicators of class status and upgrading, based on
                    indicators of class status and upgrading created based on indicators of class status indicators.</div>
            </div>
            <!-- <div class="wrapper">
                <div class="txt-subtitle">John Lauermann<br></div>
            </div> -->
            <div class="wrapper">
                <div class="learn_more-wrapper">
                    <a href="https://github.com/johnlauermann/gentrification-intensity-map" target="_blank"
                        class="link-wrapper">
                        <span class="txt-link">National Gentrification Lab<br></span>
                    </a>
                    <button id="dropdown-learn_more" class="dropdown-minus">
                        <img src="images/picto-minus.png" alt="" class="picto">
                    </button>
                </div>
            </div>
        </div>


        <!-- box 2 buttons -->
        <div id="box-2" class="box-container">

            <!-- municipality menu dropdown -->
            <div class="wrapper dropdown-wrap">
                <button id="dropdown-selected-city" class="dropdown-selected">
                    <span class="txt-menu">New York City</span>
                    <img src="images/picto-arrow.png" alt="" class="picto">
                </button>
                <nav id="dropdown-menu-city" class="dropdown-menu" aria-hidden="true">
                    <a href="#" class="dropdown-link">Atlanta</a>
                    <a href="#" class="dropdown-link">Chicago</a>
                    <a href="#" class="dropdown-link">Dallas</a>
                    <a href="#" class="dropdown-link">Houston</a>
                    <a href="#" class="dropdown-link">Los Angeles</a>
                    <a href="#" class="dropdown-link">New York City</a>
                    <a href="#" class="dropdown-link">Philadelphia</a>
                    <a href="#" class="dropdown-link">Washington DC</a>
                    <a href="#" class="dropdown-link">US</a>
                </nav>
            </div>

            <div class="line"></div>

            <!-- boundaries checkbox -->
            <div class="boundaries-wrapper">
                <span class="txt-menu">Boundaries</span>
                <div class="on_off">
                    <input type="checkbox" id="checkbox-municipality-input" checked />
                    <label for="checkbox-municipality-input" class="btn on">ON</label>
                    <label for="checkbox-municipality-input" class="btn off">OFF</label>
                </div>
            </div>

            <div class="line"></div>

            <!-- data period -->
            <div id="period" class="period-wrapper">
                <span class="txt-menu">Data</span>
                <div class="on_off">
                    <input type="checkbox" id="checkbox-period-input" />
                    <label for="checkbox-period-input" class="btn on">1970-2020</label>
                    <label for="checkbox-period-input" class="btn off">1990-2020</label>
                </div>
            </div>

            <div id="line-bottom" class="line"></div>
        </div>


        <!-- box 3 details panel -->        
        <div id="box-3" class="box-container details-box">

            <!-- index legend -->
            <div class="wrapper details-header">
                <div class="details-header-left">
                    <div class="txt-menu">Index</div>
                    <div class="txt-body">Standard deviation</div>
                </div>
                <button id="toggle-details" class="toggle-details-btn" aria-expanded="true"
                    aria-controls="details-body">
                    <img src="images/picto-minus.png" alt="Collapse" class="picto">
                </button>
            </div>

            <!-- legend -->
            <div class="wrapper">
                <div id="legend_wrap" class="legend-wrapper">
                    <!-- marker -->
                    <div id="legend_marker" class="legend-marker" aria-hidden="true" style="display:none;">
                        <div id="legend_marker_value" class="legend-marker-value">—</div>
                        <div class="legend-marker-line"></div>
                    </div>

                    <!-- legend items -->
                    <div class="legend-icon-wrapper">
                        <div class="legend-icon _1"></div>
                        <div class="txt-legend">-4</div>
                    </div>
                    <div class="legend-icon-wrapper">
                        <div class="legend-icon _2"></div>
                    </div>
                    <div class="legend-icon-wrapper">
                        <div class="legend-icon _3"></div>
                        <div class="txt-legend">0</div>
                    </div>
                    <div class="legend-icon-wrapper">
                        <div class="legend-icon _4"></div>
                    </div>
                    <div class="legend-icon-wrapper">
                        <div class="legend-icon _5"></div>
                        <div class="txt-legend">2</div>
                    </div>
                    <div class="legend-icon-wrapper">
                        <div class="legend-icon _6"></div>
                    </div>
                    <div class="legend-icon-wrapper">
                        <div class="legend-icon _7"></div>
                        <div class="txt-legend">4</div>
                    </div>
                </div>
            </div>

            <div class="line"></div>
            
            <!-- details (can collapse) -->
            <div id="details-body" class="details-body">
                <div class="wrapper">
                    <div class="txt-menu">Tract</div>
                    <div id="detail-tract" class="txt-value">—</div>
                </div>

                <div class="wrapper">
                    <div class="txt-menu">Metro</div>
                    <div id="detail-metro" class="txt-value">—</div>
                </div>

                <div class="wrapper">
                    <div class="txt-menu">Class</div>
                    <div id="detail-class" class="txt-value">—</div>
                </div>

                <div class="line"></div>

                <div class="wrapper">
                    <div class="txt-menu">Indicators</div><br>
                    <div class="txt-body">
                        <div><span class="txt-label">Rental contract</span><br><span id="detail-rent" class="txt-value">—</span></div><br>
                        <div><span class="txt-label">House value</span><br><span id="detail-house" class="txt-value">—</span></div><br>
                        <div><span class="txt-label">Household income</span><br><span id="detail-income" class="txt-value">—</span></div><br>
                        <div><span class="txt-label">Poverty</span><br><span id="detail-poverty" class="txt-value">—</span></div><br>
                        <div><span class="txt-label">Bachelor degree</span><br><span id="detail-bach" class="txt-value">—</span></div><br>
                        <div><span class="txt-label">White collar positions</span><br><span id="detail-white" class="txt-value">—</span></div>
                    </div>
                </div>

            </div>
        </div>
    </section>


    <section class="map-container">
        <div id="map" class="box-map-container">
            <!--  mapbox scripts  -->
            <script src="https://api.mapbox.com/mapbox-gl-js/v3.15.0/mapbox-gl.js"></script>
            <script>
                mapboxgl.accessToken = 'pk.eyJ1IjoiamxhdWVybWEiLCJhIjoiY21pM210azZ6MXJvajJqcHkxcGN1NGdkOCJ9.tENRQ9ijIMLWhbjI7XJzWQ'; // john's
                window.map = new mapboxgl.Map({
                    container: 'map',
                    style: 'mapbox://styles/jlauerma/cmi3f9nfn004j01rs9d6m7bxj',
                    center: [-74, 40.73],
                    zoom: 10
                });
                // layers visibility on start
                map.on('load', () => {
                    map.setLayoutProperty('municipality-limits', 'visibility', 'visible');

                    const is_1970 = document.getElementById('checkbox-period-input')?.checked ?? true;
                    map.setLayoutProperty('gi-fac-1970_2020_temp', 'visibility', is_1970 ? 'visible' : 'none');
                    map.setLayoutProperty('gi-fac-1990_2020', 'visibility', is_1970 ? 'none' : 'visible');
                });
            </script>
        </div>
    </section>


    <script src="js/script-3.js"></script>

</body>